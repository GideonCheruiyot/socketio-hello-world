<!DOCTYPE html>
<html>
	<head>
	  <title>Input Play</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    <script src="/socket.io/socket.io.js"></script>
  </head>
  <body>
    <h2>Playing with websockets using socketio</h2>
    <p>You are currently <span id="status">not connected</span></p>
    <ul id="server-messages">
    </ul>
    <script>
    $(document).ready(function(){
      var socket = io.connect();
      var messages = [];
      
      var addMessage = function(data){
        $("#server-messages").append("<li>"+JSON.stringify(data)+"</li>");
      };
      
      socket.on('welcome', function (data) {
        $("#status").html("connected");
        addMessage(data);
        socket.emit('ping server', { hi: 'server' });
      });
      
      socket.on('pong server', function(data){
        addMessage(data);
      });
      
      socket.on('server time', function(data){
        addMessage(data);
      });
      
      socket.on('disconnect', function(){
        $("#status").html("not connected");
      });
      
      socket.on('disconnected', function(){
        $("#status").html("not connected");
      });
    });
    </script>
  </body>
</html>